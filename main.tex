\documentclass[twoside]{book}
\usepackage[utf8]{inputenc}
\usepackage{makeidx}
\usepackage{tocbibind}%include toc in toc
\usepackage[totoc]{idxlayout} % package for including index page in the table of content
\makeindex
\input{preamble}
\input{operators[preamble]}
\input{dyslexic-font} %run with luatex for open-dyslexic

\counterwithout{figure}{chapter}

\DeclareFieldFormat{titlecase}{\MakeSentenceCase*{#1}}

\usepackage{appendix}
\makeindex

\begin{document}


\subfile{cover/frontcover}
\subfile{cover/seriespage}
\subfile{cover/titlepage}
\subfile{cover/copyrightpage}

\tableofcontents

\subfile{intro/preface}
\subfile{intro/editors-preface}

\pagestyle{fancy}
\subfile{ch1/ch1}
\subfile{ch2/ch2}
\subfile{ch3/ch3}
\subfile{ch4/ch4}
\subfile{ch5/ch5}
\subfile{ch6/ch6}
\subfile{ch7/ch7}
\subfile{ch8/ch8}
\subfile{ch9/ch9}
\subfile{ch10/ch10}
\subfile{ch11/ch11}
\subfile{ch12/ch12}
\subfile{ch13/ch13}
\subfile{ch14/ch14}
\subfile{ch15/ch15}
\subfile{ch16/ch16}
\subfile{ch17/ch17}
\subfile{ch18/ch18}
\subfile{ch19/ch19}
\subfile{ch20/ch20}
\subfile{epi/epi}

\renewcommand{\theproblem}{\thechapter-\arabic{problem}}

\appendix
\appendixpage
\addappheadtotoc
\subfile{app-A/app-A}
\subfile{app-B/app-B}
\subfile{app-C/app-C}

\setstretch{0.1}
\pagestyle{plain}
\renewcommand*{\bibfont}{\small}
\printbibliography[
heading=bibintoc,
title={Bibliography},
]

\setstretch{0.1}
{\footnotesize
\cleardoublepage
\printindex\label{index}
\clearpage
}

\subfile{cover/backcover}

\end{document}
